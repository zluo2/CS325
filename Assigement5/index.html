<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Phaser Basic Project Template</title>
	<script src="js/phaser.min.js"></script>
	<script src="js/main.js"></script>

<style>
body
{
    color: #777;
    font-family: "Avenir", Verdana, sans-serif;
}
#readme
{
    margin-top: 10px;
}
</style>

</head>

<body>
<center><div id="gamebox"></div></center>
<script type="text/javascript">
function Boot(game){
	this.preload = function() {
		game.load.spritesheet('loading', 'assets/loading.png', 80, 24);  
	};
	this.create = function() {
		game.state.start('loading');
	}
}
function Loading(game){
	var loadingSprite;
	this.preload = function() {
		loadingSprite = game.add.sprite(280, 200, 'loading');
		loadingSprite.animations.add('loadingplay', [0, 1, 2], 5, true);
		loadingSprite.animations.play('loadingplay');

		game.load.spritesheet('sheet-hero', 'assets/heros.png', 32, 32);  
		game.load.spritesheet('sheet-monster', 'assets/monsters.png',32,32);

		game.load.image('talkboximg', 'assets/talkbox.png');
		
		game.load.spritesheet('button-arrow', 'assets/button-arrow.png', 64, 64);  
		game.load.spritesheet('button-x', 'assets/button-x.png', 64, 64);  
		game.load.spritesheet('button-menu', 'assets/button-menu.png', 64, 64);  
		game.load.spritesheet('button-a', 'assets/button-a.png', 96, 96);  
		game.load.spritesheet('button-att', 'assets/attack.png', 64, 64);  
		game.load.spritesheet('button-leave', 'assets/run.png', 64, 64);  
		game.load.spritesheet('button-start', 'assets/button-start.png', 160, 93);  

		game.load.image('tiles-2', 'assets/tiles-2.png');
		game.load.image('world-ground', 'assets/world-background.png');
		game.load.image('world-fore', 'assets/world-fore.png');
		game.load.tilemap('world-1', 'assets/world-1.json', null, Phaser.Tilemap.TILED_JSON);

		game.load.image('fightingback', 'assets/fightingback.png');
		game.load.spritesheet('monster', 'assets/monsters.png',32,32);
		game.load.spritesheet('fire', 'assets/fire.png',80,40);
		game.load.spritesheet('fire2', 'assets/fire2.png',58,100);
		game.load.audio('begin','assets/enter1.mp3');
		game.load.audio('town','assets/background11.mp3');
		game.load.audio('fighting','assets/fighting.mp3');
	}
	this.create=function () {
		game.state.start('gamemenu');
	};
}
function GameMenu(game){
	this.create = function() {
	
		var box = game.add.sprite(0,200,game.make.bitmapData(game.width, game.height));
		box.addChild(game.add.text(150, -20, "Long long ago，there is a old town……",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(100, 10, "There are a lot of monsters around the old town！",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(100, 40, "A hero promises that he will do whatever it takes",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(200, 70, "for protecting people！",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(150, 100, "Please, clikc the button to start！",{fontSize:'20px',fill:'#fff'}));
		box.alpha = 0;
		game.add.tween(box).to({alpha:1,y:150},3000,"Linear",true);

		var buttonClose = game.add.button(230, 300, 'button-start', null, this, 0, 1, 0, 1);
		buttonClose.events.onInputDown.add(function(){game.state.start('gamemain');});
	}
}
function GameWin(game){
	this.create = function() {
		var box = game.add.sprite(0, 200, game.make.bitmapData(game.width, game.height));
		box.addChild(game.add.text(180, 0, "Excalibur appears again！",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(100, 30, "Our hero go to castle for killing the boss……",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(180, 60, "See you, hero！",{fontSize:'20px',fill:'#fff'}));
		box.alpha = 0;
		game.add.tween(box).to({alpha:1,y:120},3000,"Linear",true);

		var buttonClose = game.add.button(285, 300, 'button-x', null, this, 0, 1, 0, 1);
		buttonClose.events.onInputDown.add(function(){
			//game.state.start('gamemenu');
			location.reload();
		});
	}
}
function GameOver(game){
	this.create = function() {
		var box = game.add.sprite(0, 200, game.make.bitmapData(game.width, game.height));
		box.addChild(game.add.text(180, 0, "What？Loser?……",{fontSize:'20px',fill:'#fff'}));
		box.addChild(game.add.text(100, 30, "You can do it better in the next time……",{fontSize:'20px',fill:'#fff'}));
		box.alpha = 0;
		game.add.tween(box).to({alpha:1,y:150},3000,"Linear",true);

		var buttonClose = game.add.button(285, 300, 'button-x', null, this, 0, 1, 0, 1);
		buttonClose.events.onInputDown.add(function(){
			//game.state.start('gamemenu');
			location.reload();
		});
	}
}

window.onload = function() {
	var game = new Phaser.Game(640, 480, Phaser.CANVAS, 'gamebox');
	game.state.add("boot",Boot);
	game.state.add("loading",Loading);
	game.state.add("gamemain",GameMain);
	game.state.add("viewinfo",ViewInfo);
	game.state.add("fighting",Fighting);
	game.state.add("gamemenu",GameMenu);
	game.state.add("gamewin",GameWin);
	game.state.add("gameover",GameOver);
	game.state.start('boot');
};

</script>
</body>

<body>
<div id="game"></div>
<div id="readme">
<h2>Your game title</h2>
<ul>

<li><strong>High Concept:</strong>
A one-sentence summary of your game.
</li>

<li><strong>Theme:</strong>
State which of the Storymatic themes you used.
</li>

<li><strong>Mandated Variety:</strong>
State which input, randomness, genre, and play style you used in this prototype.
</li>

<li><strong>Player Experience Goals:</strong>
What experience do you want players to have when playing your game?
</li>

<li><strong>Gameplay:</strong>
A paragraph describing the actions the player can perform, the system dynamics, and the core mechanic. Include a concise explanation of the prototype’s inputs and their expected effects (how to play). You can also describe game play that is not in the prototype. You may include mock-up images for parts of the game not in the prototype.
</li>

<li><strong>Prototype Goal:</strong>
What game mechanic is this prototype evaluating?
</li>

<li><strong>Features:</strong>
What are the unique aspects of your game that set it apart?
</li>

<li><strong>Setting/Premise:</strong>
A paragraph about the world your game is set in and who the characters are. What makes the game world and its occupants unique and interesting? Do the tokens represent something? If the game has a backstory, put it here. If the game is abstract, then say so.
</li>

<li><strong>Story:</strong>
If the game has a story (or you envision a story for the full game), summarize it in a paragraph. How will the dramatic tension interact with the gameplay tension?
</li>

<li><strong>Target Audience:</strong>
A single sentence that describes the demographic you're trying to reach.
</li>

<li><strong>Play Time:</strong>
How long does your game take to play?
</li>

<li><strong>Strategies:</strong>
What player strategies do you expect will be effective at playing this game?
</li>

<li><strong>Prototype Assets:</strong>
Did you make your prototype assets from scratch? Did you borrow them? Cite your sources here.
<ul>
<li>Loading screen: self-made</li>
<li>Puppy image: self-made</li>
<li>Button: Phaser example <a href="https://phaser.io/examples/v2/buttons/action-on-click">Action On Click</a></li>
<li>Bouncing Phaser image: <a href="https://phaser.io/download/logo">Phaser logo</a></li>
<li>Music: "Poppers and Prosecco" Kevin MacLeod (<a href="incompetech.com">incompetech.com</a>). Licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons: By Attribution 3.0 License</a></li>
</ul>
</li>

<li><strong>Prototype Closest Other Game:</strong>
Which other game most closely resembles your game? If you are borrowing code from a Phaser Example, you must say so here. If you borrow code from elsewhere, you must say so here.
<ul>
<li>The code for this example is adapted from the <a href="https://github.com/photonstorm/phaser/tree/v2.6.2/resources/Project%20Templates/Basic">Phaser Basic Project Template</a></li>
</ul>
</li>

</ul>
</div>
</body>
</html>
