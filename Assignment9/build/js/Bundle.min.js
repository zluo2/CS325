var Bolt=function(a,b,c,d,e){d="bolts",Phaser.Sprite.call(this,a,b,c,d,e),this.scale.setTo(.5),this.anchor.setTo(.5),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.checkWorldBounds=!0,this.onOutOfBoundsKill=!0,this.events.onKilled.add(this.onKilled,this),this.events.onRevived.add(this.onRevived,this)};Bolt.prototype=Object.create(Phaser.Sprite.prototype),Bolt.prototype.constructor=Bolt,Bolt.prototype.onRevived=function(){this.body.velocity.y=400},Bolt.prototype.onKilled=function(){};var Enemy=function(a,b,c,d,e){d="enemies",Phaser.Sprite.call(this,a,b,c,d,e),this.scale.setTo(.6),this.anchor.setTo(.5,.5),this.frame=this.game.rnd.between(0,6),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.setSize(55,126),this.checkWorldBounds=!0,this.onOutOfBoundsKill=!0,this.events.onRevived.add(this.onRevived,this)};Enemy.prototype=Object.create(Phaser.Sprite.prototype),Enemy.prototype.constructor=Enemy,Enemy.prototype.onRevived=function(){new Phaser.RandomDataGenerator;this.body.velocity.y=this.game.rnd.between(250,350),this.game.add.tween(this).to({x:this.x-1},500,Phaser.Easing.Linear.NONE,!0,0,1/0,!0)};var Scoreboard=function(a){Phaser.Group.call(this,a)};Scoreboard.prototype=Object.create(Phaser.Group.prototype),Scoreboard.prototype.constructor=Scoreboard,Scoreboard.prototype.show=function(a){var b,c,d,e,f;b=this.game.add.bitmapData(this.game.width,this.game.height),b.ctx.fillStyle="#000",b.ctx.fillRect(0,0,this.game.width,this.game.height),c=this.game.add.sprite(0,0,b),c.alpha=.5,this.add(c);var g=!1,h=localStorage.getItem("highscore");(!h||a>h)&&(g=!0,h=a,localStorage.setItem("highscore",h)),this.y=0-this.game.height,d=this.game.add.bitmapText(0,150,"brokenstick","You Lose!!.",50),d.x=this.game.width/2-d.textWidth/2,this.add(d),e=this.game.add.bitmapText(0,250,"brokenstick","Your Score: "+a,36),e.x=this.game.width/2-e.textWidth/2,this.add(e),startText=this.game.add.bitmapText(0,350,"brokenstick","Tap to ride again!",30),startText.anchor.setTo(.5),startText.x=this.game.width/2-startText.textWidth/2+130,this.game.add.tween(startText.scale).to({x:1.1,y:1.1},400,Phaser.Easing.Linear.NONE,!0,2e3,1/0,!0),startText.tint=15400954,this.add(startText),g&&(f=this.game.add.bitmapText(0,100,"brokenstick","New High Score!",36),f.x=this.game.width/2-f.textWidth/2,f.tint=3276757,this.game.add.tween(f).from({y:0},2e3,Phaser.Easing.Bounce.Out,!0,100,0,!1),this.add(f)),this.game.add.tween(this).to({y:-5},1e3,Phaser.Easing.Bounce.Out,!0),this.game.input.onDown.addOnce(this.restart,this),this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.addOnce(this.restart,this)},Scoreboard.prototype.restart=function(){this.game.input.activePointer.justPressed()?(isMainMenuClicked=!0,this.game.state.start("Game",!0,!1)):this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).isDown&&(isMainMenuClicked=!1,this.game.state.start("Game",!0,!1))};var CrashedAgain=function(){};CrashedAgain.Boot=function(){},CrashedAgain.Boot.prototype={preload:function(){this.load.image("preloader","assets/images/preloader.png")},create:function(){this.game.stage.backgroundColor="#fff",this.input.maxPointers=1,this.game.device.desktop?this.scale.pageAlignHorizontally=!0:(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=568,this.scale.minHeight=600,this.scale.maxWidth=2048,this.scale.maxHeight=1536,this.scale.forceLandscape=!0,this.scale.pageAlignHorizontally=!0,this.scale.updateLayout(!0)),this.state.start("Preloader")}},CrashedAgain.Game=function(){this.playerMinAngle=-20,this.playerMaxAngle=20,this.boltRate=1e3,this.boltTimer=0,this.enemyRate=1100,this.enemyTimer=0,this.score=0},CrashedAgain.Game.prototype={create:function(){this.game.world.bound=new Phaser.Rectangle(0,0,this.game.width,this.game.height),this.background=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"background"),this.background.autoScroll(0,900),this.player=this.add.sprite(200,this.game.height-100,"player"),this.player.anchor.setTo(.5),this.player.scale.setTo(.8),this.player.animations.add("wheelie",[6,7]),this.player.animations.add("ride",[0,1]),this.player.animations.play("ride",30,!0),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=400,this.game.physics.arcade.enableBody(this.player),this.player.body.collideWorldBounds=!0,this.player.body.setSize(58,126),this.bolts=this.game.add.group(),this.enemies=this.game.add.group(),this.scoreText=this.game.add.bitmapText(15,10,"brokenstick","Score: 0",36),this.scoreText.tint=3276757,this.boltSound=this.game.add.audio("bolt"),this.crashSound=this.game.add.audio("crash"),this.gameMusic=this.game.add.audio("gameMusic"),this.gameMusic.play("",0,!0,.1),cursors=game.input.keyboard.createCursorKeys()},update:function(){this.bolts.forEach(function(a){a.rotation+=.75},this),isMainMenuClicked?this.game.input.activePointer.isDown?(game.physics.arcade.moveToPointer(this.player,350),this.player.deltaY<0?this.player.animations.play("wheelie",30,!0):this.player.deltaX<0?this.player.frame=2:this.player.deltaX>0&&(this.player.frame=3),Phaser.Rectangle.contains(this.player.body,this.game.input.x,this.game.input.y)&&(this.player.frame=0,this.player.body.velocity.y+=30)):(this.player.animations.play("ride",30,!0),this.player.body.velocity.y+=30):(cursors.left.isDown?(this.player.body.velocity.x-=55,this.player.frame=2):cursors.right.isDown&&(this.player.body.velocity.x+=55,this.player.frame=3),cursors.up.isDown?(this.player.animations.play("wheelie",30,!0),this.player.body.velocity.y-=10):this.player.animations.play("ride",30,!0)),this.boltTimer<this.game.time.now&&(this.createBolt(),this.boltTimer=this.game.time.now+this.boltRate),this.enemyTimer<this.game.time.now&&(this.createEnemy(),this.enemyTimer=this.game.time.now+this.enemyRate),this.game.physics.arcade.overlap(this.player,this.bolts,this.boltHit,null,this),this.game.physics.arcade.overlap(this.player,this.enemies,this.enemyHit,null,this)},shutdown:function(){this.bolts.destroy(),this.enemies.destroy(),this.score=0,this.boltTimer=0,this.enemyTimer=0},createBolt:function(){var a=this.game.rnd.integerInRange(50,this.game.world.width-50),b=0,c=this.bolts.getFirstExists(!1);c||(c=new Bolt(this.game,0,0),this.bolts.add(c)),c.reset(a,b),c.revive()},createEnemy:function(){var a=this.game.rnd.integerInRange(50,this.game.world.width-50),b=-20,c=this.enemies.getFirstExists(!1);c||(c=new Enemy(this.game,0,b),this.enemies.add(c)),c.reset(a,b),c.revive()},boltHit:function(a,b){cursors.up.isDown?this.score+=2:this.score++,this.boltSound.play(),b.kill();var c=new Bolt(this.game,b.x,b.y);this.game.add.existing(c);var d=this.game.add.tween(c).to({x:50,y:50},300,Phaser.Easing.Linear.NONE,!0);d.onComplete.add(function(){c.destroy(),this.scoreText.text="Score: "+this.score},this)},enemyHit:function(a,b){this.crash=this.add.sprite(this.player.x-30,this.player.y-100,"player"),this.crash.animations.add("crash",[4,5]),this.crash.animations.play("crash",10,!1),this.game.time.events.add(2e3,function(){this.game.add.tween(this.crash).to({y:this.game.height+200},1500,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.crash).to({alpha:0},1500,Phaser.Easing.Linear.None,!0)},this),a.kill(),b.kill(),this.crashSound.play(),this.gameMusic.stop(),this.background.stopScroll(),this.enemies.setAll("body.velocity.x",0),this.bolts.setAll("body.velocity.x",0),this.enemyTimer=Number.MAX_VALUE,this.boltTimer=Number.MAX_VALUE;var c=new Scoreboard(this.game);c.show(this.score)}},CrashedAgain.MainMenu=function(){},CrashedAgain.MainMenu.prototype={create:function(){this.background=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"background"),this.background.autoScroll(0,400),this.player=this.add.sprite(200,this.game.height-100,"player"),this.player.anchor.setTo(.5),this.player.scale.setTo(.8),this.player.animations.add("ride",[0,1]),this.player.animations.play("ride",30,!0),this.game.add.tween(this.player).to({y:this.player.y-5},500,Phaser.Easing.Linear.NONE,!0,0,1/0,!0),this.game.add.tween(this.player).to({x:this.player.x-5},500,Phaser.Easing.Linear.NONE,!0,0,1/0,!0),this.titleText=this.game.add.bitmapText(0,0,"whiskeybravo","Car",60),this.titleText.x=this.game.world.centerX/2-30,this.titleText.y=window.innerHeight/2/2,this.titleText2=this.game.add.bitmapText(0,0,"whiskeybravo","Accident",60),this.titleText2.x=this.game.world.centerX/2+9,this.titleText2.y=this.titleText.y+50,this.startText=this.game.add.bitmapText(0,0,"whiskeybravo","tap to start",32),this.startText.x=this.game.width/2-this.startText.textWidth/2,this.startText.y=this.game.height/2+this.titleText.height/2},update:function(){this.game.input.activePointer.justPressed()?(isMainMenuClicked=!0,this.game.state.start("Game")):this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).isDown&&(isMainMenuClicked=!1,this.game.state.start("Game"))}},CrashedAgain.Preload=function(){this.ready=!1},CrashedAgain.Preload.prototype={preload:function(){this.preloadImg=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"preloader"),this.preloadImg.anchor.setTo(.5),this.load.setPreloadSprite(this.preloadImg),this.load.image("background","assets/images/background.png"),this.load.image("bolts","assets/images/bolt.png"),this.load.spritesheet("enemies","assets/images/cars.png",103,228,7),this.load.spritesheet("player","assets/images/bikes.png",58,126,8),this.load.spritesheet("crashes","assets/images/crashes.png",121,126,2),this.load.audio("gameMusic",["assets/audio/bg.mp3","assets/audio/bg.ogg"]),this.load.audio("bolt","assets/audio/bolt.wav"),this.load.audio("crash","assets/audio/crash.wav"),this.load.bitmapFont("whiskeybravo","assets/fonts/whiskeybravo/whiskeybravo.png","assets/fonts/whiskeybravo/whiskeybravo.xml"),this.load.bitmapFont("brokenstick","assets/fonts/brokenstick/brokenstick.png","assets/fonts/brokenstick/brokenstick.xml"),this.load.onLoadComplete.add(this.onLoadComplete,this)},create:function(){this.preloadImg.cropEnabled=!1},update:function(){this.cache.isSoundDecoded("gameMusic")&&this.ready===!0&&this.state.start("MainMenu")},onLoadComplete:function(){this.ready=!0}};var game=new Phaser.Game(400,window.innerHeight,Phaser.CANVAS,"",null),isMainMenuClicked=!1;game.state.add("Boot",CrashedAgain.Boot),game.state.add("Preloader",CrashedAgain.Preload),game.state.add("MainMenu",CrashedAgain.MainMenu),game.state.add("Game",CrashedAgain.Game),game.state.start("Boot");